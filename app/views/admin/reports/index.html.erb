<h2>通報一覧</h2>

<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>通報対象</th>
      <th>通報理由</th>
      <th>通報者</th>
      <th>日時</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @reports.each do |report| %>
      <tr>
        <td><%= report.id %></td>
        <td>
          <% if report.reportable.present? %>
            <% case report.reportable_type %>
            <% when "Artist" %>
              <%= link_to report.reportable.name, edit_admin_artist_path(report.reportable.id) %>
            <% when "Topic" %>
              <% topic = report.reportable %>
              <%= link_to "トピック編集: #{truncate(topic.title, length: 20)}", edit_admin_artist_topic_path(topic.artist, topic) %>
            <% when "Group" %>
              <%= link_to report.reportable.name, edit_admin_group_path(report.reportable.id) %>
            <% when "Comment" %>
              <% comment = report.reportable %>
              <% topic = comment.topic %>
              <% artist = topic.artist %>
              <%= link_to "コメント編集（トピック）", artist_topic_path(artist, topic) %>
            <% when "GroupComment" %>
              <% group_comment = report.reportable %>
              <% group = group_comment.group %>
              <%= link_to "コメント編集（グループ）", group_path(group) %>
            <% else %>
              不明な対象
            <% end %>
          <% else %>
            通報対象が存在しません
          <% end %>
        </td>
        <td><%= truncate(report.reason, length: 30) %></td>
        <td><%= report.user.name %></td>
        <td><%= l(report.created_at, format: :short) %></td>
        <td><%= link_to "詳細", admin_report_path(report) %></td>
      </tr>
    <% end %>
  </tbody>
</table>